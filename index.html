<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YRC Lost & Found</title>
    <style>
        :root { --main-pink: #e10098; --bg-color: #fdf2f8; --success: #2ed573; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: var(--bg-color); margin: 0; }
        
        /* Header & Sidebar */
        header { background: var(--main-pink); color: white; padding: 15px; display: flex; align-items: center; position: sticky; top: 0; z-index: 500; }
        .sidebar { height: 100%; width: 0; position: fixed; z-index: 1000; top: 0; left: 0; background-color: white; overflow-x: hidden; transition: 0.5s; padding-top: 60px; box-shadow: 2px 0 15px rgba(0,0,0,0.1); }
        .sidebar a { padding: 12px 25px; text-decoration: none; font-size: 16px; color: #444; display: block; border-bottom: 1px solid #f9f9f9; }
        
        /* Container & Elements */
        .container { max-width: 450px; margin: 20px auto; background: white; padding: 30px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: center; }
        .input-box, select { width: 100%; padding: 14px; border: 2px solid #eee; border-radius: 12px; margin-bottom: 15px; box-sizing: border-box; font-size: 16px; outline: none; }
        .btn { width: 100%; padding: 16px; border: none; border-radius: 15px; cursor: pointer; font-weight: bold; font-size: 18px; transition: 0.3s; margin-top: 10px; }
        .btn-main { background-color: var(--main-pink); color: white; }
        .btn-confirm { background-color: var(--success); color: white; }
        .btn-disabled { background-color: #ccc; cursor: not-allowed; opacity: 0.6; }
        
        .hidden { display: none !important; }
        .item-card { border-left: 5px solid var(--main-pink); background: #fff; padding: 15px; border-radius: 12px; margin-top: 15px; border: 1px solid #eee; text-align: left; }
    </style>
</head>
<body>

<div id="mySidebar" class="sidebar">
    <span style="position:absolute;top:10px;right:25px;font-size:36px;cursor:pointer;" onclick="closeNav()">&times;</span>
    <a href="#" onclick="showSection('homePage')">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å / ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</a>
    <a href="#" onclick="showSection('profilePage')">üë§ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß & ‡∏´‡πâ‡∏≠‡∏á</a>
    <a href="#" onclick="showSection('matchPage')">üîî ‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ó‡∏≥‡∏´‡∏≤‡∏¢ (‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏à‡∏≠)</a>
    <a href="#" onclick="showHistory('found')">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏à‡∏≠</a>
    <a href="#" onclick="logout()" style="color:red; margin-top: 20px;">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
</div>

<header id="mainHeader" class="hidden">
    <span style="font-size:24px; cursor:pointer; margin-right:15px;" onclick="openNav()">&#9776;</span>
    <b>YRC LOST & FOUND</b>
</header>

<div class="container" id="contentArea">
    
    <div id="welcomePage">
        <div style="font-size: 70px; margin-bottom: 10px;">üå∏</div>
        <h1>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö</h1>
        <p>‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏°‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢<br>‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏¢‡∏∏‡∏û‡∏£‡∏≤‡∏ä‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</p>
        <button class="btn btn-main" onclick="showSection('loginPage')">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
    </div>

    <div id="loginPage" class="hidden">
        <h1>Login</h1>
        <div style="text-align: left;">
            <label>‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
            <input type="number" id="stuID" class="input-box" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç 5 ‡∏´‡∏•‡∏±‡∏Å" oninput="validate()">
            <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
            <input type="password" id="stuPass" class="input-box" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" oninput="validate()">
        </div>
        <button id="loginBtn" class="btn btn-main btn-disabled" onclick="handleLogin()" disabled>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
        <button class="btn" style="background: none; color: #999;" onclick="showSection('welcomePage')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
    </div>

    <div id="homePage" class="hidden">
        <button class="btn btn-main" onclick="showSection('foundForm')">ü§ù ‡∏â‡∏±‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡πÑ‡∏î‡πâ (‡πÅ‡∏à‡πâ‡∏á‡∏û‡∏ö)</button>
        <button class="btn" style="background:#2f3542; color:white;" onclick="showSection('lostForm')">üîç ‡∏â‡∏±‡∏ô‡∏ó‡∏≥‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢ (‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏≤‡∏¢)</button>
        <h3 style="text-align: left; margin-top: 30px;">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
        <div id="globalList"></div>
    </div>

    <div id="profilePage" class="hidden">
        <h2>üë§ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h2>
        <input type="text" id="profName" class="input-box" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
        <div style="display:flex; gap:10px;">
            <select id="profLevel" class="input-box"></select>
            <select id="profRoom" class="input-box"></select>
        </div>
        <input type="tel" id="profTel" class="input-box" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠">
        <input type="text" id="profIG" class="input-box" placeholder="Instagram (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)">
        <button class="btn btn-main" onclick="saveProfile()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    </div>

    <div id="matchPage" class="hidden">
        <h2>üîî ‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏à‡∏≠‡πÅ‡∏•‡πâ‡∏ß</h2>
        <div id="matchList"></div>
    </div>

    <div id="foundForm" class="hidden">
        <h2>‡πÅ‡∏à‡πâ‡∏á‡∏û‡∏ö‡∏Ç‡∏≠‡∏á</h2>
        <input type="text" id="fName" class="input-box" placeholder="‡πÄ‡∏à‡∏≠‡∏Ç‡∏≠‡∏á‡∏≠‡∏∞‡πÑ‡∏£...">
        <input list="locations" id="fLoc" class="input-box" placeholder="‡πÄ‡∏à‡∏≠‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô...">
        <button class="btn btn-main" onclick="savePost('found')">‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</button>
    </div>

    <div id="lostForm" class="hidden">
        <h2>‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</h2>
        <input type="text" id="lName" class="input-box" placeholder="‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏´‡∏≤‡∏¢...">
        <input list="locations" id="lLoc" class="input-box" placeholder="‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏¢...">
        <button class="btn btn-main" onclick="savePost('lost')">‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</button>
    </div>

</div>

<datalist id="locations"></datalist>

<script>
    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà
    const locs = ["‡∏ï‡∏∂‡∏Å 1 ‡∏ï‡∏∂‡∏Å‡∏¢‡∏∏‡∏û‡∏£‡∏≤‡∏ä", "‡∏ï‡∏∂‡∏Å 2 ‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡∏ß‡∏¥‡πÄ‡∏ä‡∏µ‡∏¢‡∏£", "‡∏ï‡∏∂‡∏Å 3 ‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡∏£‡∏±‡∏ï‡∏ô‡πå", "‡∏ï‡∏∂‡∏Å 4 ‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡πÄ‡∏û‡∏ä‡∏£", "‡∏ï‡∏∂‡∏Å 5 ‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡∏ß‡∏ä‡∏¥‡∏£‡∏∞", "‡∏ï‡∏∂‡∏Å 6 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏û‡∏±‡∏ä‡∏£‡∏∞", "‡∏ï‡∏∂‡∏Å 7 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏£‡∏±‡∏ï‡∏ô‡∏°‡∏ì‡∏µ", "‡∏ï‡∏∂‡∏Å 8 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏®‡∏£‡∏µ‡∏°‡∏£‡∏Å‡∏ï", "‡∏ï‡∏∂‡∏Å 9 ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ô‡∏ß‡∏£‡∏±‡∏ï‡∏ô‡πå", "‡∏ï‡∏∂‡∏Å 10 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏û‡∏ä‡∏£‡∏£‡∏±‡∏ï‡∏ô‡∏£‡∏≤‡∏ä‡∏™‡∏∏‡∏î‡∏≤", "‡∏ï‡∏∂‡∏Å 11 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏¢‡∏∏‡∏û‡∏£‡∏≤‡∏ä 100 ‡∏õ‡∏µ", "‡∏ï‡∏∂‡∏Å 12 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏ä‡∏¥‡∏£‡∏î‡∏≤‡∏£‡∏≤", "‡∏ï‡∏∂‡∏Å 13 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ß‡∏¥‡∏ó‡∏¢‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡∏≤‡∏£‡∏≤‡∏£‡∏±‡∏®‡∏°‡∏µ", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• 100 ‡∏õ‡∏µ", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå 100 ‡∏õ‡∏µ", "‡∏ò‡∏£‡∏£‡∏°‡∏™‡∏ñ‡∏≤‡∏ô", "‡πÇ‡∏£‡∏á‡∏ä‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô", "‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‡∏ß", "‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏£‡∏±‡∏á‡∏ú‡∏∂‡πâ‡∏á", "‡πÇ‡∏î‡∏°‡∏¢‡∏∏‡∏û‡∏£‡∏≤‡∏ä‡∏£‡∏±‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå"];

    window.onload = function() {
        const lv = document.getElementById('profLevel');
        for(let i=1; i<=6; i++) lv.innerHTML += `<option value="‡∏°.${i}">‡∏°.${i}</option>`;
        const rm = document.getElementById('profRoom');
        for(let i=1; i<=17; i++) rm.innerHTML += `<option value="${i}">‡∏´‡πâ‡∏≠‡∏á ${i}</option>`;
        const dl = document.getElementById('locations');
        locs.forEach(l => dl.innerHTML += `<option value="${l}">`);
    };

    function validate() {
        const id = document.getElementById('stuID').value;
        const pass = document.getElementById('stuPass').value;
        const btn = document.getElementById('loginBtn');
        btn.disabled = !(id.length === 5 && pass.length > 0);
        btn.classList.toggle('btn-disabled', btn.disabled);
    }

    function handleLogin() {
        const id = document.getElementById('stuID').value;
        const pw = document.getElementById('stuPass').value;
        const savedPW = localStorage.getItem('password_' + id) || id;

        if (pw === savedPW.toString()) {
            localStorage.setItem('currentUser', id);
            document.getElementById('mainHeader').classList.remove('hidden');
            showSection('homePage');
        } else {
            alert("‚ùå ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
        }
    }

    function showSection(id) {
        const sects = ['welcomePage', 'loginPage', 'homePage', 'profilePage', 'matchPage', 'foundForm', 'lostForm'];
        sects.forEach(s => document.getElementById(s).classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
        if(id === 'homePage') renderGlobal();
        if(id === 'matchPage') renderMatch();
        closeNav();
    }

    function savePost(type) {
        const name = document.getElementById(type === 'found' ? 'fName' : 'lName').value;
        const loc = document.getElementById(type === 'found' ? 'fLoc' : 'lLoc').value;
        const user = localStorage.getItem('currentUser');
        if(!name || !loc) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");

        const posts = JSON.parse(localStorage.getItem('yrc_posts') || '[]');
        posts.push({ id: Date.now(), type, name, loc, user, status: 'active', confirmF: false, confirmL: false });
        localStorage.setItem('yrc_posts', JSON.stringify(posts));
        alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß");
        showSection('homePage');
    }

    function renderGlobal() {
        const list = document.getElementById('globalList');
        const posts = JSON.parse(localStorage.getItem('yrc_posts') || '[]');
        list.innerHTML = '';
        posts.slice().reverse().forEach(p => {
            if(p.status === 'done') return;
            const prof = JSON.parse(localStorage.getItem('profile_' + p.user) || '{}');
            list.innerHTML += `<div class="item-card">
                <span style="background:${p.type==='found'?'#e10098':'#2f3542'};color:white;padding:2px 6px;border-radius:5px;font-size:11px;">${p.type==='found'?'‡πÅ‡∏à‡πâ‡∏á‡∏û‡∏ö':'‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏≤‡∏¢'}</span>
                <b> ${p.name}</b><br>üìç ${p.loc}<br>
                <small>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠: ${prof.tel || p.user} (‡∏´‡πâ‡∏≠‡∏á ${prof.room || '-'})</small>
            </div>`;
        });
    }

    function renderMatch() {
        const user = localStorage.getItem('currentUser');
        const posts = JSON.parse(localStorage.getItem('yrc_posts') || '[]');
        const matchList = document.getElementById('matchList');
        matchList.innerHTML = '';
        
        const myLost = posts.filter(p => p.user === user && p.type === 'lost' && p.status !== 'done');
        myLost.forEach(lost => {
            const matches = posts.filter(p => p.type === 'found' && p.name.includes(lost.name) && p.status !== 'done');
            matches.forEach(m => {
                const prof = JSON.parse(localStorage.getItem('profile_' + m.user) || '{}');
                matchList.innerHTML += `<div class="item-card" style="border-left-color:var(--success)">
                    <b>‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏Å‡∏±‡∏ô: ${m.name}</b><br>‡∏Ñ‡∏ô‡πÄ‡∏à‡∏≠: ${prof.name || m.user}<br>
                    <button class="btn btn-confirm" onclick="confirmReturn('${m.id}', 'lost')">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏â‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</button>
                </div>`;
            });
        });
    }

    function confirmReturn(postId, role) {
        let posts = JSON.parse(localStorage.getItem('yrc_posts'));
        const idx = posts.findIndex(p => p.id == postId);
        if(role === 'lost') posts[idx].confirmL = true;
        alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ‡πÅ‡∏•‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà");
        localStorage.setItem('yrc_posts', JSON.stringify(posts));
        showSection('homePage');
    }

    function saveProfile() {
        const user = localStorage.getItem('currentUser');
        const data = {
            name: document.getElementById('profName').value,
            level: document.getElementById('profLevel').value,
            room: document.getElementById('profRoom').value,
            tel: document.getElementById('profTel').value,
            ig: document.getElementById('profIG').value
        };
        localStorage.setItem('profile_' + user, JSON.stringify(data));
        alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
    }

    function openNav() { document.getElementById("mySidebar").style.width = "280px"; }
    function closeNav() { document.getElementById("mySidebar").style.width = "0"; }
    function logout() { localStorage.removeItem('currentUser'); location.reload(); }
</script>
</body>
</html>
