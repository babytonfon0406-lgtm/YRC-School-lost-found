<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YRC Lost & Found - Secure System</title>
    <style>
        :root { --main-pink: #e10098; --light-pink: #fce4ec; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: #fdf2f8; margin: 0; overflow-x: hidden; }
        
        /* Sidebar Menu */
        .sidebar { height: 100%; width: 0; position: fixed; z-index: 1000; top: 0; left: 0; background-color: white; overflow-x: hidden; transition: 0.5s; padding-top: 60px; box-shadow: 2px 0 15px rgba(0,0,0,0.1); }
        .sidebar a { padding: 12px 25px; text-decoration: none; font-size: 17px; color: #444; display: block; border-bottom: 1px solid #f9f9f9; }
        .sidebar a:hover { background-color: var(--light-pink); color: var(--main-pink); }
        .sidebar .closebtn { position: absolute; top: 10px; right: 25px; font-size: 36px; cursor: pointer; color: var(--main-pink); }

        /* Header */
        header { background: var(--main-pink); color: white; padding: 15px; display: flex; align-items: center; position: sticky; top: 0; z-index: 500; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .menu-icon { font-size: 24px; cursor: pointer; margin-right: 15px; }

        .container { max-width: 500px; margin: 20px auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(225,0,152,0.1); }
        .input-box, select { width: 100%; padding: 12px; border: 2px solid #eee; border-radius: 10px; margin-bottom: 12px; box-sizing: border-box; font-size: 16px; }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 16px; color: white; transition: 0.3s; }
        .btn-main { background-color: var(--main-pink); }
        .btn-outline { background-color: white; color: var(--main-pink); border: 2px solid var(--main-pink); margin-top: 10px; }
        
        .hidden { display: none !important; }
        .item-card { border-left: 5px solid var(--main-pink); background: #fff; padding: 15px; border-radius: 12px; margin-top: 15px; border: 1px solid #eee; }
    </style>
</head>
<body>

<div id="mySidebar" class="sidebar">
    <span class="closebtn" onclick="closeNav()">&times;</span>
    <div style="text-align:center; padding: 20px; border-bottom: 2px solid var(--light-pink);">
        <div style="width:70px; height:70px; background:var(--main-pink); color:white; border-radius:50%; margin:auto; line-height:70px; font-size:30px;">üå∏</div>
        <h3 id="sideUserName" style="margin-top:10px; font-size:16px;">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: -</h3>
    </div>
    <a href="#" onclick="showSection('homePage')">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    <a href="#" onclick="showSection('profilePage')">üë§ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a>
    <a href="#" onclick="showSection('passwordPage')">üîë ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</a>
    <a href="#" onclick="showHistory('found')">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏à‡∏≠‡∏Ç‡∏≠‡∏á</a>
    <a href="#" onclick="showHistory('lost')">üîç ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</a>
    <a href="#" onclick="logout()" style="color:#ff4757; margin-top:20px; border-top: 1px solid #eee;">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
</div>

<header id="mainHeader" class="hidden">
    <span class="menu-icon" onclick="openNav()">&#9776;</span>
    <span style="font-weight:bold;">YRC LOST & FOUND</span>
</header>

<div class="container">
    <div id="loginSection">
        <h1 style="text-align:center; color: var(--main-pink);">Login</h1>
        <p style="text-align:center; color: #888; font-size: 14px;">‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß 50000 - 57000<br>(‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß)</p>
        <input type="number" id="loginID" class="input-box" placeholder="‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">
        <input type="password" id="loginPass" class="input-box" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
        <button class="btn btn-main" onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>

    <div id="homePage" class="hidden">
        <button class="btn btn-main" style="height:80px; margin-bottom:10px;" onclick="showSection('foundPage')">ü§ù ‡πÄ‡∏à‡∏≠‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢ (‡πÅ‡∏à‡πâ‡∏á‡∏û‡∏ö)</button>
        <button class="btn btn-outline" style="height:80px;" onclick="showSection('lostPage')">üîç ‡∏ï‡∏≤‡∏°‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢ (‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏≤‡∏¢)</button>
        <h3 style="margin-top:30px; border-bottom: 2px solid var(--main-pink);">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
        <div id="globalList"></div>
    </div>

    <div id="passwordPage" class="hidden">
        <h2>üîë ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h2>
        <input type="password" id="oldPass" class="input-box" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô">
        <input type="password" id="newPass" class="input-box" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà">
        <input type="password" id="confirmNewPass" class="input-box" placeholder="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà">
        <button class="btn btn-main" onclick="changePassword()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
        <button class="btn btn-outline" onclick="showSection('homePage')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
    </div>

    <div id="foundPage" class="hidden">
        <button onclick="showSection('homePage')" class="btn-outline" style="width:auto; padding:5px 15px; font-size:12px;">‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö</button>
        <h2>ü§ù ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏à‡∏≠‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</h2>
        <input type="text" id="foundName" class="input-box" placeholder="‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠...">
        <input list="locations" id="foundLoc" class="input-box" placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà..." onchange="updateFloors('foundLoc', 'foundFloor')">
        <select id="foundFloor" class="input-box"><option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏±‡πâ‡∏ô...</option></select>
        <button class="btn btn-main" onclick="savePost('found')">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    </div>

    <div id="lostPage" class="hidden">
        <button onclick="showSection('homePage')" class="btn-outline" style="width:auto; padding:5px 15px; font-size:12px;">‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö</button>
        <h2>üîç ‡∏ï‡∏≤‡∏°‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</h2>
        <input type="text" id="lostName" class="input-box" placeholder="‡∏≠‡∏∞‡πÑ‡∏£‡∏´‡∏≤‡∏¢...">
        <input list="locations" id="lostLoc" class="input-box" placeholder="‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà...">
        <button class="btn btn-main" style="background:#2f3542;" onclick="savePost('lost')">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ï‡∏≤‡∏°‡∏´‡∏≤</button>
    </div>

    <div id="profilePage" class="hidden">
        <h2>üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h2>
        <input type="text" id="profName" class="input-box" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
        <select id="profLevel" class="input-box"></select>
        <select id="profNo" class="input-box"></select>
        <button class="btn btn-main" onclick="saveProfile()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    </div>

    <div id="historyPage" class="hidden">
        <button onclick="showSection('homePage')" class="btn-outline" style="width:auto; padding:5px 15px; font-size:12px;">‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö</button>
        <h2 id="historyTitle">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</h2>
        <div id="historyList"></div>
    </div>
</div>

<datalist id="locations"></datalist>

<script>
    const locs = ["‡∏ï‡∏∂‡∏Å 1 ‡∏ï‡∏∂‡∏Å‡∏¢‡∏∏‡∏û‡∏£‡∏≤‡∏ä", "‡∏ï‡∏∂‡∏Å 2 ‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡∏ß‡∏¥‡πÄ‡∏ä‡∏µ‡∏¢‡∏£", "‡∏ï‡∏∂‡∏Å 3 ‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡∏£‡∏±‡∏ï‡∏ô‡πå", "‡∏ï‡∏∂‡∏Å 4 ‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡πÄ‡∏û‡∏ä‡∏£", "‡∏ï‡∏∂‡∏Å 5 ‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡∏ß‡∏ä‡∏¥‡∏£‡∏∞", "‡∏ï‡∏∂‡∏Å 6 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏û‡∏±‡∏ä‡∏£‡∏∞", "‡∏ï‡∏∂‡∏Å 7 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏£‡∏±‡∏ï‡∏ô‡∏°‡∏ì‡∏µ", "‡∏ï‡∏∂‡∏Å 8 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏®‡∏£‡∏µ‡∏°‡∏£‡∏Å‡∏ï", "‡∏ï‡∏∂‡∏Å 9 ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ô‡∏ß‡∏£‡∏±‡∏ï‡∏ô‡πå", "‡∏ï‡∏∂‡∏Å 10 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏û‡∏ä‡∏£‡∏£‡∏±‡∏ï‡∏ô‡∏£‡∏≤‡∏ä‡∏™‡∏∏‡∏î‡∏≤", "‡∏ï‡∏∂‡∏Å 11 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏¢‡∏∏‡∏û‡∏£‡∏≤‡∏ä 100 ‡∏õ‡∏µ", "‡∏ï‡∏∂‡∏Å 12 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏ä‡∏¥‡∏£‡∏î‡∏≤‡∏£‡∏≤", "‡∏ï‡∏∂‡∏Å 13 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ß‡∏¥‡∏ó‡∏¢‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡∏≤‡∏£‡∏≤‡∏£‡∏±‡∏®‡∏°‡∏µ", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• 100 ‡∏õ‡∏µ", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå 100 ‡∏õ‡∏µ", "‡∏ò‡∏£‡∏£‡∏°‡∏™‡∏ñ‡∏≤‡∏ô", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏î‡∏ô‡∏ï‡∏£‡∏µ‡πÑ‡∏ó‡∏¢", "‡πÇ‡∏£‡∏á‡∏ä‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô", "‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‡∏ß", "‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏£‡∏±‡∏á‡∏ú‡∏∂‡πâ‡∏á", "‡∏™‡∏ß‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ô‡πÄ‡∏¢‡πá‡∏ô", "‡πÇ‡∏î‡∏°‡∏¢‡∏∏‡∏û‡∏£‡∏≤‡∏ä‡∏£‡∏±‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå", "‡πÇ‡∏î‡∏°‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 2", "‡πÇ‡∏î‡∏°‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 5", "‡πÇ‡∏î‡∏°‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 7-8"];

    window.onload = function() {
        const lv = document.getElementById('profLevel');
        for(let i=1; i<=6; i++) lv.innerHTML += `<option value="‡∏°.${i}">‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà ${i}</option>`;
        const no = document.getElementById('profNo');
        for(let i=1; i<=45; i++) no.innerHTML += `<option value="${i}">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà ${i}</option>`;
        const dl = document.getElementById('locations');
        locs.forEach(l => dl.innerHTML += `<option value="${l}">`);
    };

    function login() {
        const id = document.getElementById('loginID').value;
        const pw = document.getElementById('loginPass').value;
        const numID = parseInt(id);

        if (numID < 50000 || numID > 57000 || isNaN(numID)) {
            alert("‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 50000 - 57000");
            return;
        }

        // ‡∏î‡∏∂‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏ß‡πâ ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ ID ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        const storedPW = localStorage.getItem('password_' + id) || id;

        if (pw === storedPW) {
            localStorage.setItem('currentUser', id);
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('mainHeader').classList.remove('hidden');
            document.getElementById('sideUserName').innerText = "‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: " + id;
            showSection('homePage');
        } else {
            alert("‚ùå ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà");
        }
    }

    function changePassword() {
        const user = localStorage.getItem('currentUser');
        const oldP = document.getElementById('oldPass').value;
        const newP = document.getElementById('newPass').value;
        const confP = document.getElementById('confirmNewPass').value;
        const currentStoredP = localStorage.getItem('password_' + user) || user;

        if (oldP !== currentStoredP) return alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
        if (newP.length < 4) return alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 4 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£");
        if (newP !== confP) return alert("‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô");

        localStorage.setItem('password_' + user, newP);
        alert("‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ‡∏£‡∏´‡∏±‡∏™‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤");
        showSection('homePage');
    }

    function openNav() { document.getElementById("mySidebar").style.width = "280px"; }
    function closeNav() { document.getElementById("mySidebar").style.width = "0"; }
    function showSection(id) {
        ["homePage", "foundPage", "lostPage", "profilePage", "historyPage", "passwordPage"].forEach(s => {
            document.getElementById(s).classList.add('hidden');
        });
        document.getElementById(id).classList.remove('hidden');
        if(id === 'homePage') displayGlobal();
        closeNav();
    }

    function logout() { localStorage.removeItem('currentUser'); location.reload(); }

    function updateFloors(locId, floorId) {
        const loc = document.getElementById(locId).value;
        const fl = document.getElementById(floorId);
        fl.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏±‡πâ‡∏ô...</option>';
        let max = (["‡∏ï‡∏∂‡∏Å 1 ‡∏ï‡∏∂‡∏Å‡∏¢‡∏∏‡∏û‡∏£‡∏≤‡∏ä", "‡∏ï‡∏∂‡∏Å 6 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏û‡∏±‡∏ä‡∏£‡∏∞", "‡∏ï‡∏∂‡∏Å 9 ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ô‡∏ß‡∏£‡∏±‡∏ï‡∏ô‡πå", "‡∏ï‡∏∂‡∏Å 11 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏¢‡∏∏‡∏û‡∏£‡∏≤‡∏ä 100 ‡∏õ‡∏µ"].includes(loc)) ? 2 : (loc.includes("‡∏ï‡∏∂‡∏Å") ? 4 : 1);
        for (let i = 1; i <= max; i++) fl.innerHTML += `<option value="${i}">‡∏ä‡∏±‡πâ‡∏ô ${i}</option>`;
    }

    function savePost(type) {
        const name = document.getElementById(type+'Name').value;
        const loc = document.getElementById(type+'Loc').value;
        const floor = (type === 'found') ? document.getElementById('foundFloor').value : 'N/A';
        const posts = JSON.parse(localStorage.getItem('yrcPosts')) || [];
        posts.push({ type, name, loc, floor, user: localStorage.getItem('currentUser'), date: new Date().toLocaleString('th-TH') });
        localStorage.setItem('yrcPosts', JSON.stringify(posts));
        alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
        showSection('homePage');
    }

    function displayGlobal() {
        const list = document.getElementById('globalList');
        const posts = JSON.parse(localStorage.getItem('yrcPosts')) || [];
        list.innerHTML = '';
        posts.slice().reverse().forEach(p => {
            const color = p.type === 'found' ? 'var(--main-pink)' : '#2f3542';
            list.innerHTML += `<div class="item-card" style="border-left-color:${color}">
                <small style="background:${color}; color:white; padding:2px 5px; border-radius:3px;">${p.type==='found'?'‡πÄ‡∏à‡∏≠‡∏Ç‡∏≠‡∏á':'‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏≤‡∏¢'}</small><br>
                <b>${p.name}</b> | üìç ${p.loc} ${p.floor!=='N/A'?'‡∏ä‡∏±‡πâ‡∏ô '+p.floor:''}<br>
                <small style="color:#999;">‡πÇ‡∏î‡∏¢ ${p.user} ‡πÄ‡∏°‡∏∑‡πà‡∏≠ ${p.date}</small>
            </div>`;
        });
    }

    function showHistory(type) {
        showSection('historyPage');
        const user = localStorage.getItem('currentUser');
        const posts = JSON.parse(localStorage.getItem('yrcPosts')) || [];
        const hList = document.getElementById('historyList');
        const title = document.getElementById('historyTitle');
        title.innerText = type === 'found' ? "‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏à‡∏≠‡∏Ç‡∏≠‡∏á" : "‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏≤‡∏¢";
        const filtered = posts.filter(p => p.user === user && p.type === type);
        hList.innerHTML = filtered.length === 0 ? '<p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</p>' : '';
        filtered.reverse().forEach(p => {
            hList.innerHTML += `<div class="item-card"><b>${p.name}</b><br>üìç ${p.loc}<br><small>${p.date}</small></div>`;
        });
    }

    function saveProfile() {
        const profile = { name: document.getElementById('profName').value, level: document.getElementById('profLevel').value, no: document.getElementById('profNo').value };
        localStorage.setItem('yrcProfile_' + localStorage.getItem('currentUser'), JSON.stringify(profile));
        alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡πâ‡∏ß");
        showSection('homePage');
    }
</script>
</body>
</html>
