<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YRC Lost & Found System</title>
    <style>
        :root { --main-pink: #e10098; --bg: #fdf2f8; --dark: #2f3542; --success: #2ed573; --orange: #ff9f43; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: var(--bg); margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        
        .container { max-width: 450px; width: 90%; background: white; padding: 35px; border-radius: 30px; box-shadow: 0 15px 35px rgba(225,0,152,0.1); text-align: center; margin: 20px auto; }
        .hidden { display: none !important; }
        
        header { background: var(--main-pink); color: white; width: 100%; padding: 15px; position: fixed; top: 0; left: 0; z-index: 100; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .menu-btn { position: absolute; left: 15px; cursor: pointer; font-size: 24px; }
        
        .sidebar { height: 100%; width: 0; position: fixed; z-index: 1000; top: 0; left: 0; background-color: white; overflow-x: hidden; transition: 0.5s; padding-top: 60px; box-shadow: 2px 0 15px rgba(0,0,0,0.1); }
        .sidebar a { padding: 15px 25px; text-decoration: none; font-size: 16px; color: #444; display: block; border-bottom: 1px solid #f9f9f9; text-align: left; }
        
        .input-box { width: 100%; padding: 15px; border: 2px solid #eee; border-radius: 15px; box-sizing: border-box; font-size: 16px; margin-bottom: 15px; outline: none; }
        .btn { width: 100%; padding: 16px; border: none; border-radius: 15px; cursor: pointer; font-weight: bold; font-size: 16px; margin-top: 10px; transition: 0.3s; }
        .btn-main { background-color: var(--main-pink); color: white; }
        .btn-success { background-color: var(--success); color: white; }
        .btn-orange { background-color: var(--orange); color: white; }
        .btn-disabled { background-color: #ccc; cursor: not-allowed; opacity: 0.6; }
        
        .item-card { background: #fff; border: 1px solid #eee; border-left: 5px solid var(--main-pink); padding: 15px; border-radius: 15px; margin-bottom: 12px; text-align: left; }
        .status-badge { font-size: 11px; padding: 3px 8px; border-radius: 5px; color: white; margin-bottom: 5px; display: inline-block; }
    </style>
</head>
<body>

<div id="mySidebar" class="sidebar">
    <span style="position:absolute;top:10px;right:25px;font-size:36px;cursor:pointer;" onclick="closeNav()">&times;</span>
    <div style="padding: 20px; text-align: center; border-bottom: 1px solid #eee;">
        <div style="font-size: 40px;">üå∏</div>
        <div id="userDisplay" style="font-weight: bold; margin-top: 10px;">-</div>
    </div>
    <a href="#" onclick="showSection('homePage')">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    <a href="#" onclick="showSection('profilePage')">üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß / ‡∏´‡πâ‡∏≠‡∏á</a>
    <a href="#" onclick="showSection('changePassPage')">üîë ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</a>
    <a href="#" onclick="showSection('matchPage')">üîî ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢/‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏Ç‡∏≠‡∏á</a>
    <a href="#" onclick="location.reload()" style="color:red; margin-top: 20px;">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
</div>

<header id="mainHeader" class="hidden">
    <div class="menu-btn" onclick="openNav()">&#9776;</div>
    YRC LOST & FOUND
</header>

<div id="loginPage" class="container">
    <h1>Login</h1>
    <div style="text-align: left;">
        <label style="font-weight:bold; color:#555;">‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
        <input type="number" id="stuID" class="input-box" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç 5 ‡∏´‡∏•‡∏±‡∏Å" oninput="validateLogin()">
        <label style="font-weight:bold; color:#555;">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
        <input type="password" id="stuPass" class="input-box" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" oninput="validateLogin()">
    </div>
    <button id="loginBtn" class="btn btn-main btn-disabled" onclick="doLogin()" disabled>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
</div>

<div id="homePage" class="container hidden" style="margin-top: 80px;">
    <button class="btn btn-main" style="height: 80px;" onclick="showSection('foundForm')">ü§ù ‡πÅ‡∏à‡πâ‡∏á‡∏û‡∏ö‡∏Ç‡∏≠‡∏á</button>
    <button class="btn btn-dark" style="height: 80px; margin-top: 10px; background:#2f3542; color:white;" onclick="showSection('lostForm')">üîç ‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</button>
    <h3 style="text-align: left; margin-top: 25px; border-bottom: 2px solid var(--main-pink);">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
    <div id="globalList"></div>
</div>

<div id="matchPage" class="container hidden" style="margin-top: 80px;">
    <h2>üîî ‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏Ç‡∏≠‡∏á</h2>
    <p style="font-size: 13px; color: #666;">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏∞‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠ "‡∏Ñ‡∏ô‡∏û‡∏ö" ‡πÅ‡∏•‡∏∞ "‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á" ‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà</p>
    <div id="confirmArea"></div>
    <button class="btn" onclick="showSection('homePage')">‡∏Å‡∏•‡∏±‡∏ö</button>
</div>

<div id="profilePage" class="container hidden" style="margin-top: 80px;">
    <h1>üë§ ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</h1>
    <input type="text" id="pName" class="input-box" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
    <select id="pRoom" class="input-box"></select>
    <button class="btn btn-main" onclick="saveProfile()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    <button class="btn" onclick="showSection('homePage')">‡∏Å‡∏•‡∏±‡∏ö</button>
</div>

<div id="changePassPage" class="container hidden" style="margin-top: 80px;">
    <h1>üîë ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h1>
    <input type="password" id="newPass" class="input-box" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà">
    <input type="password" id="confirmNewPass" class="input-box" placeholder="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà">
    <button class="btn btn-main" onclick="changePassword()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏´‡∏±‡∏™‡πÉ‡∏´‡∏°‡πà</button>
    <button class="btn" onclick="showSection('homePage')">‡∏Å‡∏•‡∏±‡∏ö</button>
</div>

<div id="foundForm" class="container hidden" style="margin-top: 80px;">
    <h1>‡πÅ‡∏à‡πâ‡∏á‡∏û‡∏ö‡∏Ç‡∏≠‡∏á</h1>
    <input type="text" id="fItem" class="input-box" placeholder="‡πÄ‡∏à‡∏≠‡∏≠‡∏∞‡πÑ‡∏£...">
    <input type="text" id="fLoc" class="input-box" placeholder="‡πÄ‡∏à‡∏≠‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô...">
    <button class="btn btn-main" onclick="submitPost('found')">‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</button>
    <button class="btn" onclick="showSection('homePage')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
</div>

<div id="lostForm" class="container hidden" style="margin-top: 80px;">
    <h1>‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</h1>
    <input type="text" id="lItem" class="input-box" placeholder="‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏´‡∏≤‡∏¢...">
    <input type="text" id="lLoc" class="input-box" placeholder="‡∏´‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô...">
    <button class="btn btn-main" onclick="submitPost('lost')">‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</button>
    <button class="btn" onclick="showSection('homePage')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
</div>

<script>
    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö (‡∏Ñ‡∏ß‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô DB ‡∏à‡∏£‡∏¥‡∏á)
    let posts = JSON.parse(localStorage.getItem('yrc_posts') || '[]');

    window.onload = function() {
        const rm = document.getElementById('pRoom');
        for(let i=1; i<=17; i++) rm.innerHTML += `<option value="${i}">‡∏´‡πâ‡∏≠‡∏á ${i}</option>`;
    };

    function validateLogin() {
        const id = document.getElementById('stuID').value;
        const pw = document.getElementById('stuPass').value;
        const btn = document.getElementById('loginBtn');
        btn.disabled = !(id.length === 5 && pw.length > 0);
        btn.classList.toggle('btn-disabled', btn.disabled);
    }

    function doLogin() {
        const id = document.getElementById('stuID').value;
        const pw = document.getElementById('stuPass').value;
        const savedPW = localStorage.getItem('pw_' + id) || id;
        if (pw === savedPW) {
            localStorage.setItem('currentUser', id);
            document.getElementById('userDisplay').innerText = "ID: " + id;
            showSection('homePage');
        } else { alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"); }
    }

    function showSection(id) {
        document.querySelectorAll('.container').forEach(c => c.classList.add('hidden'));
        document.getElementById('mainHeader').classList.toggle('hidden', id === 'loginPage');
        document.getElementById(id).classList.remove('hidden');
        if(id === 'homePage') renderGlobal();
        if(id === 'matchPage') renderConfirmArea();
        closeNav();
    }

    function submitPost(type) {
        const item = document.getElementById(type==='found'?'fItem':'lItem').value;
        const loc = document.getElementById(type==='found'?'fLoc':'lLoc').value;
        if(!item || !loc) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");
        posts.push({ 
            id: Date.now(), type, item, loc, 
            user: localStorage.getItem('currentUser'),
            confFound: false, confOwner: false, status: 'active'
        });
        saveData();
        showSection('homePage');
    }

    function renderGlobal() {
        const list = document.getElementById('globalList');
        list.innerHTML = '';
        posts.filter(p => p.status === 'active').slice().reverse().forEach(p => {
            list.innerHTML += `<div class="item-card">
                <span class="status-badge" style="background:${p.type==='found'?'#e10098':'#2f3542'}">${p.type==='found'?'‡πÅ‡∏à‡πâ‡∏á‡∏û‡∏ö':'‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏≤‡∏¢'}</span>
                <strong> ${p.item}</strong><br><small>üìç ${p.loc} | ‡πÇ‡∏î‡∏¢: ${p.user}</small>
            </div>`;
        });
    }

    function renderConfirmArea() {
        const area = document.getElementById('confirmArea');
        const user = localStorage.getItem('currentUser');
        area.innerHTML = '';
        
        posts.forEach(p => {
            if(p.status === 'done') return;
            
            // ‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏£‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÅ‡∏à‡πâ‡∏á‡∏û‡∏ö (‡∏£‡∏≠‡∏Ñ‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏∑‡∏ô)
            if(p.user === user && p.type === 'found') {
                area.innerHTML += `<div class="item-card">
                    <strong>‡∏Ñ‡∏∏‡∏ì‡∏û‡∏ö: ${p.item}</strong><br>
                    <button class="btn ${p.confFound?'btn-disabled':'btn-success'}" onclick="confirmAction(${p.id}, 'found')" ${p.confFound?'disabled':''}>
                        ${p.confFound ? '‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß' : '‡∏Å‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏ô‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß'}
                    </button>
                    ${!p.confOwner ? '<p style="font-size:11px; color:orange;">* ‡∏£‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á</p>' : ''}
                </div>`;
            }

            // ‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏£‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏≤‡∏¢ (‡∏£‡∏≠‡∏Ñ‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö)
            if(p.user === user && p.type === 'lost') {
                area.innerHTML += `<div class="item-card">
                    <strong>‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏´‡∏≤‡∏¢: ${p.item}</strong><br>
                    <button class="btn ${p.confOwner?'btn-disabled':'btn-orange'}" onclick="confirmAction(${p.id}, 'owner')" ${p.confOwner?'disabled':''}>
                        ${p.confOwner ? '‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß' : '‡∏Å‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß'}
                    </button>
                    ${!p.confFound ? '<p style="font-size:11px; color:orange;">* ‡∏£‡∏≠‡∏Ñ‡∏ô‡∏û‡∏ö‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô</p>' : ''}
                </div>`;
            }
        });
    }

    function confirmAction(postId, role) {
        const idx = posts.findIndex(p => p.id === postId);
        if(role === 'found') posts[idx].confFound = true;
        if(role === 'owner') posts[idx].confOwner = true;
        
        // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏Å‡∏î‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡∏±‡πà‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
        if(posts[idx].confFound && posts[idx].confOwner) {
            posts[idx].status = 'done';
            alert("üéâ ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå! ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏õ‡∏¥‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
        } else {
            alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏≠‡∏≠‡∏µ‡∏Å‡∏ù‡πà‡∏≤‡∏¢‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
        }
        saveData();
        renderConfirmArea();
    }

    function saveData() { localStorage.setItem('yrc_posts', JSON.stringify(posts)); }
    function openNav() { document.getElementById("mySidebar").style.width = "280px"; }
    function closeNav() { document.getElementById("mySidebar").style.width = "0"; }
    function saveProfile() { alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡πâ‡∏ß"); showSection('homePage'); }
    function changePassword() { alert("‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß"); showSection('homePage'); }
</script>
</body>
</html>
